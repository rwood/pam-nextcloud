# Example PAM configuration for SDDM (KDE Display Manager)
# This file shows how to use pam_nextcloud for KDE Plasma desktop login
# with KDE Accounts integration
#
# Copy this to /etc/pam.d/sddm or modify your existing sddm PAM configuration

# Authentication
auth    sufficient  pam_python.so /lib/security/pam_nextcloud.py

# Include standard KDE authentication stack
auth    requisite   pam_nologin.so
auth    sufficient  pam_unix.so nullok try_first_pass
auth    required    pam_deny.so

# Account management
account sufficient  pam_python.so /lib/security/pam_nextcloud.py
account sufficient  pam_unix.so
account required    pam_permit.so

# Session management with KDE Accounts integration
session optional    pam_python.so /lib/security/pam_nextcloud.py
session required    pam_limits.so
session required    pam_unix.so
session optional    pam_kwallet5.so auto_start
session optional    pam_systemd.so

# Password management
password sufficient pam_python.so /lib/security/pam_nextcloud.py
password required   pam_unix.so use_authtok sha512 shadow

